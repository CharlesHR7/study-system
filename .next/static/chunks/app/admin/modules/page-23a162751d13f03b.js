(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4764],{3998:(e,s,t)=>{"use strict";t.d(s,{$:()=>o});var a=t(5155);t(2115);var n=t(2467),r=t(3101),l=t(4269);let i=(0,r.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:s,variant:t,size:r,asChild:o=!1,...d}=e,c=o?n.DX:"button";return(0,a.jsx)(c,{"data-slot":"button",className:(0,l.cn)(i({variant:t,size:r,className:s})),...d})}},4269:(e,s,t)=>{"use strict";t.d(s,{cn:()=>r});var a=t(2821),n=t(5889);function r(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,n.QP)((0,a.$)(s))}},5142:(e,s,t)=>{"use strict";t.d(s,{p:()=>r});var a=t(5155);t(2115);var n=t(4269);function r(e){let{className:s,type:t,...r}=e;return(0,a.jsx)("input",{type:t,"data-slot":"input",className:(0,n.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),...r})}},6948:(e,s,t)=>{"use strict";t.d(s,{BT:()=>o,Wu:()=>d,ZB:()=>i,Zp:()=>r,aR:()=>l,wL:()=>c});var a=t(5155);t(2115);var n=t(4269);function r(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,n.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",s),...t})}function l(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,n.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",s),...t})}function i(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,n.cn)("leading-none font-semibold",s),...t})}function o(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,n.cn)("text-muted-foreground text-sm",s),...t})}function d(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,n.cn)("px-6",s),...t})}function c(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-footer",className:(0,n.cn)("flex items-center px-6 [.border-t]:pt-6",s),...t})}},9131:(e,s,t)=>{Promise.resolve().then(t.bind(t,9683))},9683:(e,s,t)=>{"use strict";t.d(s,{default:()=>m});var a=t(5155),n=t(2115);function r(e){return"active"===e?"Active":"coming_soon"===e?"Coming soon":"Under maintenance"}function l(e){let{status:s}=e,t=r(s),n="coming_soon"===s?"border-amber-500/30 bg-amber-500/10 text-amber-200":"maintenance"===s?"border-red-500/30 bg-red-500/10 text-red-200":"border-emerald-500/30 bg-emerald-500/10 text-emerald-200";return(0,a.jsx)("span",{className:"".concat("inline-flex items-center rounded-full border px-2.5 py-1 text-xs font-medium"," ").concat(n),children:t})}var i=t(6948),o=t(3998),d=t(5142);let c=[{id:"m1m2",label:"M1/M2",desc:"Airplane & Helicopter (core modules)"},{id:"avionics",label:"Avionics",desc:"Systems + Standard Practices + Logbook"},{id:"structures",label:"Structures",desc:"Study + Logbook"},{id:"balloons",label:"Balloons",desc:"Study + Logbook"}],u=[{value:"active",label:"Active"},{value:"coming_soon",label:"Coming soon"},{value:"maintenance",label:"Under maintenance"}];function m(e){let{initialLicenseFlags:s,initialModuleFlags:t}=e,[m,g]=n.useState(s),[p,x]=n.useState(t),[h,v]=n.useState(!1);function f(e,s){v(!1),g(t=>{var a;return{...t,[e]:{...null!=(a=t[e])?a:{status:"coming_soon"},...s}}})}function b(e,s,t){v(!1),x(a=>{var n,r,l;return{...a,[e]:{...null!=(r=a[e])?r:{},[s]:{...null!=(l=null==(n=a[e])?void 0:n[s])?l:{status:"coming_soon"},...t}}}})}async function j(){let e=function(){var e,s,t,a,n;let r=[];for(let t of(r.push("// src/lib/moduleFlags.ts"),r.push('export type ModuleStatus = "active" | "coming_soon" | "maintenance";'),r.push("export type Flag = { status: ModuleStatus; message?: string };"),r.push(""),r.push("export const licenseFlags = {"),c)){let a=null!=(s=m[t.id])?s:{status:"coming_soon"},n=null==(e=a.message)?void 0:e.trim();r.push("  ".concat(t.id,': { status: "').concat(a.status,'"').concat(n?", message: ".concat(JSON.stringify(n)):""," },"))}for(let e of Object.keys(m)){if(c.some(s=>s.id===e))continue;let s=m[e],a=null==(t=s.message)?void 0:t.trim();r.push("  ".concat(e,': { status: "').concat(s.status,'"').concat(a?", message: ".concat(JSON.stringify(a)):""," },"))}for(let e of(r.push("} as const satisfies Record<string, Flag>;"),r.push(""),r.push("export const moduleFlags = {"),[...c.map(e=>e.id),...Object.keys(p).filter(e=>!c.some(s=>s.id===e))])){let s=null!=(a=p[e])?a:{};for(let t of(r.push("  ".concat(e,": {")),Object.keys(s))){let e=s[t],a=null==(n=e.message)?void 0:n.trim(),l=JSON.stringify(t);r.push("    ".concat(l,': { status: "').concat(e.status,'"').concat(a?", message: ".concat(JSON.stringify(a)):""," },"))}r.push("  },")}return r.push("} as const satisfies Record<string, Record<string, Flag>>;"),r.push(""),r.push("export type LicenseId = keyof typeof licenseFlags;"),r.push("export type ModuleId<L extends LicenseId> = keyof (typeof moduleFlags)[L];"),r.push(""),r.push("export function getLabel(status: ModuleStatus) {"),r.push('  if (status === "active") return "Active";'),r.push('  if (status === "coming_soon") return "Coming soon";'),r.push('  return "Under maintenance";'),r.push("}"),r.push("export const getModuleLabel = getLabel;"),r.push(""),r.push("export function getLicenseFlag(license: LicenseId): Flag {"),r.push("  return licenseFlags[license];"),r.push("}"),r.push(""),r.push("export function getModuleFlag<L extends LicenseId>(license: L, module: ModuleId<L>): Flag {"),r.push("  return (moduleFlags[license] as any)[module] as Flag;"),r.push("}"),r.push(""),r.push("export function getEffectiveFlag<L extends LicenseId>(license: L, module?: ModuleId<L>): Flag {"),r.push("  const lic = getLicenseFlag(license);"),r.push('  if (lic.status !== "active") return lic;'),r.push("  if (!module) return lic;"),r.push("  return getModuleFlag(license, module);"),r.push("}"),r.join("\n")}();await navigator.clipboard.writeText(e),v(!0)}let y=c.map(e=>{var s,t,n;let o=null!=(s=m[e.id])?s:{status:"coming_soon"},c=null!=(t=p[e.id])?t:{},g="active"!==o.status;return(0,a.jsxs)(i.Zp,{className:"border-white/10 bg-white/5 backdrop-blur",children:[(0,a.jsxs)(i.aR,{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-start sm:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(i.ZB,{className:"text-lg",children:e.label}),e.desc?(0,a.jsx)(i.BT,{className:"mt-1",children:e.desc}):null]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)(l,{status:o.status})})]}),(0,a.jsxs)("div",{className:"grid gap-2 sm:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"License status"}),(0,a.jsx)("select",{value:o.status,onChange:s=>f(e.id,{status:s.target.value}),className:"w-full rounded-xl border border-white/10 bg-black/20 px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-white/10",children:u.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"License message (optional)"}),(0,a.jsx)(d.p,{value:null!=(n=o.message)?n:"",onChange:s=>f(e.id,{message:s.target.value}),placeholder:"Short message shown when license is locked...",className:"rounded-xl border-white/10 bg-black/20"})]})]}),g?(0,a.jsxs)("div",{className:"rounded-xl border border-amber-500/20 bg-amber-500/10 p-3 text-sm",children:["License is ",(0,a.jsx)("span",{className:"font-medium",children:r(o.status)}),". Modules below will be blocked even if they are set to Active."]}):null]}),(0,a.jsxs)(i.Wu,{className:"space-y-3",children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:"Modules"}),(0,a.jsxs)("div",{className:"space-y-3",children:[0===Object.keys(c).length?(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"No modules configured."}):null,Object.entries(c).map(s=>{var t;let[n,r]=s;return(0,a.jsx)("div",{className:"rounded-2xl border border-white/10 bg-black/10 p-4 ".concat(g?"opacity-90":""),children:(0,a.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"truncate font-semibold",children:n.replace(/[-_]/g," ").replace(/([a-z])([A-Z])/g,"$1 $2").split(" ").filter(Boolean).map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}),(0,a.jsx)(l,{status:r.status})]}),(0,a.jsxs)("div",{className:"mt-1 text-sm text-muted-foreground",children:["Route id: ",(0,a.jsx)("span",{className:"font-mono",children:n})]})]}),(0,a.jsxs)("div",{className:"flex w-full flex-col gap-2 sm:w-[380px]",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Module status"}),(0,a.jsx)("select",{value:r.status,onChange:s=>b(e.id,n,{status:s.target.value}),className:"w-full rounded-xl border border-white/10 bg-black/20 px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-white/10",children:u.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Message (optional)"}),(0,a.jsx)(d.p,{value:null!=(t=r.message)?t:"",onChange:s=>b(e.id,n,{message:s.target.value}),placeholder:"Short, ESL-friendly message...",className:"rounded-xl border-white/10 bg-black/20"})]})]})]})},n)})]})]})]},e.id)});return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(i.Zp,{className:"border-white/10 bg-white/5 backdrop-blur",children:(0,a.jsxs)(i.aR,{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(i.ZB,{className:"text-base",children:"Admin v1 — Licenses & Modules"}),(0,a.jsxs)(i.BT,{className:"mt-1",children:["Manage availability with a two-layer gate: ",(0,a.jsx)("b",{children:"License"})," → ",(0,a.jsx)("b",{children:"Modules"}),". Saving copies an updated ",(0,a.jsx)("span",{className:"font-mono",children:"moduleFlags.ts"}),"."]})]}),(0,a.jsx)(o.$,{onClick:j,className:"rounded-xl",children:"Save (copy moduleFlags.ts)"})]}),h?(0,a.jsxs)("div",{className:"rounded-xl border border-emerald-500/20 bg-emerald-500/10 p-3 text-sm",children:["✅ Copied. Paste into ",(0,a.jsx)("span",{className:"font-mono",children:"src/lib/moduleFlags.ts"})," and redeploy."]}):null]})}),(0,a.jsx)("div",{className:"grid gap-4",children:y})]})}}},e=>{e.O(0,[5707,8441,1255,7358],()=>e(e.s=9131)),_N_E=e.O()}]);