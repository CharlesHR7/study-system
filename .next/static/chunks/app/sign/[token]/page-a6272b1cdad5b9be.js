(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6160],{1030:(e,s,a)=>{Promise.resolve().then(a.bind(a,7419))},7419:(e,s,a)=>{"use strict";a.d(s,{default:()=>i});var t=a(5155),n=a(2115);function i(e){let{rawToken:s,signatory:a,tasks:i}=e,[r,l]=(0,n.useState)(""),d=async()=>{l("Confirming...");let e=await fetch("/api/sign/confirm",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:s})});if(!e.ok){var a;let s=await e.json().catch(()=>({}));l(null!=(a=null==s?void 0:s.error)?a:"Error");return}l("Signed ✅ You can close this page.")};return(0,t.jsxs)("div",{className:"p-6 max-w-2xl mx-auto",children:[(0,t.jsx)("div",{className:"text-[22px] font-bold mb-2",children:"Signature Request"}),(0,t.jsx)("div",{className:"text-gray-700 text-[13px] mb-4",children:"Please review the tasks below and confirm your signature."}),(0,t.jsxs)("div",{className:"border border-gray-200 rounded p-3 bg-white mb-4 text-[13px]",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-semibold",children:"Signatory:"})," ",a.name]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-semibold",children:"Initials:"})," ",a.initials||"—"]}),a.signatureSvg?(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsx)("div",{className:"text-[11px] text-gray-600 mb-1",children:"Signature on file:"}),(0,t.jsx)("img",{alt:"",className:"border border-gray-300 bg-white",src:"data:image/svg+xml;utf8,".concat(encodeURIComponent(a.signatureSvg))})]}):null]}),(0,t.jsxs)("div",{className:"border border-gray-200 rounded p-3 bg-white",children:[(0,t.jsx)("div",{className:"font-semibold mb-2",children:"Tasks to sign"}),(0,t.jsx)("ul",{className:"list-disc pl-5 space-y-1 text-[13px]",children:i.map((e,s)=>(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"font-semibold",children:e.ata?"ATA ".concat(e.ata," — "):""}),e.taskText,(0,t.jsxs)("span",{className:"text-gray-500 text-[12px]",children:[" (row ",e.rowIndex,")"]})]},s))})]}),(0,t.jsx)("button",{type:"button",onClick:d,className:"mt-4 px-4 py-2 rounded border border-gray-800 bg-gray-900 text-white hover:bg-black",children:"Confirm & Sign"}),r?(0,t.jsx)("div",{className:"mt-3 text-[12px] text-gray-700",children:r}):null]})}}},e=>{e.O(0,[8441,1255,7358],()=>e(e.s=1030)),_N_E=e.O()}]);