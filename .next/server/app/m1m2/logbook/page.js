(()=>{var a={};a.id=6906,a.ids=[6906],a.modules={261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},26713:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/is-bot")},28354:a=>{"use strict";a.exports=require("util")},29294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29314:(a,b,c)=>{"use strict";c.r(b),c.d(b,{GlobalError:()=>D.a,__next_app__:()=>J,handler:()=>L,pages:()=>I,routeModule:()=>K,tree:()=>H});var d=c(49754),e=c(9117),f=c(46595),g=c(32324),h=c(39326),i=c(38928),j=c(20175),k=c(12),l=c(54290),m=c(12696),n=c(82802),o=c(77533),p=c(45229),q=c(32822),r=c(261),s=c(26453),t=c(52474),u=c(26713),v=c(51356),w=c(62685),x=c(36225),y=c(63446),z=c(2762),A=c(45742),B=c(86439),C=c(81170),D=c.n(C),E=c(62506),F=c(91203),G={};for(let a in E)0>["default","tree","pages","GlobalError","__next_app__","routeModule","handler"].indexOf(a)&&(G[a]=()=>E[a]);c.d(b,G);let H={children:["",{children:["m1m2",{children:["logbook",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(c.bind(c,77227)),"C:\\Users\\charl\\OneDrive\\Desktop\\AME ONE\\AME ONE\\src\\app\\m1m2\\logbook\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(c.bind(c,58212)),"C:\\Users\\charl\\OneDrive\\Desktop\\AME ONE\\AME ONE\\src\\app\\m1m2\\logbook\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(c.bind(c,71300)),"C:\\Users\\charl\\OneDrive\\Desktop\\AME ONE\\AME ONE\\src\\app\\m1m2\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(c.bind(c,51472)),"C:\\Users\\charl\\OneDrive\\Desktop\\AME ONE\\AME ONE\\src\\app\\layout.tsx"],"global-error":[()=>Promise.resolve().then(c.t.bind(c,81170,23)),"next/dist/client/components/builtin/global-error.js"],"not-found":[()=>Promise.resolve().then(c.t.bind(c,87028,23)),"next/dist/client/components/builtin/not-found.js"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,90461,23)),"next/dist/client/components/builtin/forbidden.js"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,32768,23)),"next/dist/client/components/builtin/unauthorized.js"]}]}.children,I=["C:\\Users\\charl\\OneDrive\\Desktop\\AME ONE\\AME ONE\\src\\app\\m1m2\\logbook\\page.tsx"],J={require:c,loadChunk:()=>Promise.resolve()},K=new d.AppPageRouteModule({definition:{kind:e.RouteKind.APP_PAGE,page:"/m1m2/logbook/page",pathname:"/m1m2/logbook",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:H},distDir:".next",relativeProjectDir:""});async function L(a,b,d){var C;let G="/m1m2/logbook/page";"/index"===G&&(G="/");let M=(0,h.getRequestMeta)(a,"postponed"),N=(0,h.getRequestMeta)(a,"minimalMode"),O=await K.prepare(a,b,{srcPage:G,multiZoneDraftMode:!1});if(!O)return b.statusCode=400,b.end("Bad Request"),null==d.waitUntil||d.waitUntil.call(d,Promise.resolve()),null;let{buildId:P,query:Q,params:R,parsedUrl:S,pageIsDynamic:T,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,serverActionsManifest:X,clientReferenceManifest:Y,subresourceIntegrityManifest:Z,prerenderManifest:$,isDraftMode:_,resolvedPathname:aa,revalidateOnlyGenerated:ab,routerServerContext:ac,nextConfig:ad,interceptionRoutePatterns:ae}=O,af=S.pathname||"/",ag=(0,r.normalizeAppPath)(G),{isOnDemandRevalidate:ah}=O,ai=K.match(af,$),aj=!!$.routes[aa],ak=!!(ai||aj||$.routes[ag]),al=a.headers["user-agent"]||"",am=(0,u.getBotType)(al),an=(0,p.isHtmlBotRequest)(a),ao=(0,h.getRequestMeta)(a,"isPrefetchRSCRequest")??"1"===a.headers[t.NEXT_ROUTER_PREFETCH_HEADER],ap=(0,h.getRequestMeta)(a,"isRSCRequest")??!!a.headers[t.RSC_HEADER],aq=(0,s.getIsPossibleServerAction)(a),ar=(0,m.checkIsAppPPREnabled)(ad.experimental.ppr)&&(null==(C=$.routes[ag]??$.dynamicRoutes[ag])?void 0:C.renderingMode)==="PARTIALLY_STATIC",as=!1,at=!1,au=ar?M:void 0,av=ar&&ap&&!ao,aw=(0,h.getRequestMeta)(a,"segmentPrefetchRSCRequest"),ax=!al||(0,p.shouldServeStreamingMetadata)(al,ad.htmlLimitedBots);an&&ar&&(ak=!1,ax=!1);let ay=!0===K.isDev||!ak||"string"==typeof M||av,az=an&&ar,aA=null;_||!ak||ay||aq||au||av||(aA=aa);let aB=aA;!aB&&K.isDev&&(aB=aa),K.isDev||_||!ak||!ap||av||(0,k.d)(a.headers);let aC={...E,tree:H,pages:I,GlobalError:D(),handler:L,routeModule:K,__next_app__:J};X&&Y&&(0,o.setReferenceManifestsSingleton)({page:G,clientReferenceManifest:Y,serverActionsManifest:X,serverModuleMap:(0,q.createServerModuleMap)({serverActionsManifest:X})});let aD=a.method||"GET",aE=(0,g.getTracer)(),aF=aE.getActiveScopeSpan();try{let f=K.getVaryHeader(aa,ae);b.setHeader("Vary",f);let k=async(c,d)=>{let e=new l.NodeNextRequest(a),f=new l.NodeNextResponse(b);return K.render(e,f,d).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=aE.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==i.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${aD} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${aD} ${a.url}`)})},m=async({span:e,postponed:f,fallbackRouteParams:g})=>{let i={query:Q,params:R,page:ag,sharedContext:{buildId:P},serverComponentsHmrCache:(0,h.getRequestMeta)(a,"serverComponentsHmrCache"),fallbackRouteParams:g,renderOpts:{App:()=>null,Document:()=>null,pageConfig:{},ComponentMod:aC,Component:(0,j.T)(aC),params:R,routeModule:K,page:G,postponed:f,shouldWaitOnAllReady:az,serveStreamingMetadata:ax,supportsDynamicResponse:"string"==typeof f||ay,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,subresourceIntegrityManifest:Z,serverActionsManifest:X,clientReferenceManifest:Y,setIsrStatus:null==ac?void 0:ac.setIsrStatus,dir:c(33873).join(process.cwd(),K.relativeProjectDir),isDraftMode:_,isRevalidate:ak&&!f&&!av,botType:am,isOnDemandRevalidate:ah,isPossibleServerAction:aq,assetPrefix:ad.assetPrefix,nextConfigOutput:ad.output,crossOrigin:ad.crossOrigin,trailingSlash:ad.trailingSlash,previewProps:$.preview,deploymentId:ad.deploymentId,enableTainting:ad.experimental.taint,htmlLimitedBots:ad.htmlLimitedBots,devtoolSegmentExplorer:ad.experimental.devtoolSegmentExplorer,reactMaxHeadersLength:ad.reactMaxHeadersLength,multiZoneDraftMode:!1,incrementalCache:(0,h.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:ad.experimental.cacheLife,basePath:ad.basePath,serverActions:ad.experimental.serverActions,...as?{nextExport:!0,supportsDynamicResponse:!1,isStaticGeneration:!0,isRevalidate:!0,isDebugDynamicAccesses:as}:{},experimental:{isRoutePPREnabled:ar,expireTime:ad.expireTime,staleTimes:ad.experimental.staleTimes,cacheComponents:!!ad.experimental.cacheComponents,clientSegmentCache:!!ad.experimental.clientSegmentCache,clientParamParsing:!!ad.experimental.clientParamParsing,dynamicOnHover:!!ad.experimental.dynamicOnHover,inlineCss:!!ad.experimental.inlineCss,authInterrupts:!!ad.experimental.authInterrupts,clientTraceMetadata:ad.experimental.clientTraceMetadata||[]},waitUntil:d.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:()=>{},onInstrumentationRequestError:(b,c,d)=>K.onRequestError(a,b,d,ac),err:(0,h.getRequestMeta)(a,"invokeError"),dev:K.isDev}},l=await k(e,i),{metadata:m}=l,{cacheControl:n,headers:o={},fetchTags:p}=m;if(p&&(o[y.NEXT_CACHE_TAGS_HEADER]=p),a.fetchMetrics=m.fetchMetrics,ak&&(null==n?void 0:n.revalidate)===0&&!K.isDev&&!ar){let a=m.staticBailoutInfo,b=Object.defineProperty(Error(`Page changed from static to dynamic at runtime ${aa}${(null==a?void 0:a.description)?`, reason: ${a.description}`:""}
see more here https://nextjs.org/docs/messages/app-static-to-dynamic-error`),"__NEXT_ERROR_CODE",{value:"E132",enumerable:!1,configurable:!0});if(null==a?void 0:a.stack){let c=a.stack;b.stack=b.message+c.substring(c.indexOf("\n"))}throw b}return{value:{kind:v.CachedRouteKind.APP_PAGE,html:l,headers:o,rscData:m.flightData,postponed:m.postponed,status:m.statusCode,segmentData:m.segmentData},cacheControl:n}},o=async({hasResolved:c,previousCacheEntry:f,isRevalidating:g,span:i})=>{let j,k=!1===K.isDev,l=c||b.writableEnded;if(ah&&ab&&!f&&!N)return(null==ac?void 0:ac.render404)?await ac.render404(a,b):(b.statusCode=404,b.end("This page could not be found")),null;if(ai&&(j=(0,w.parseFallbackField)(ai.fallback)),j===w.FallbackMode.PRERENDER&&(0,u.isBot)(al)&&(!ar||an)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),(null==f?void 0:f.isStale)===-1&&(ah=!0),ah&&(j!==w.FallbackMode.NOT_FOUND||f)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),!N&&j!==w.FallbackMode.BLOCKING_STATIC_RENDER&&aB&&!l&&!_&&T&&(k||!aj)){let b;if((k||ai)&&j===w.FallbackMode.NOT_FOUND)throw new B.NoFallbackError;if(ar&&!ap){let c="string"==typeof(null==ai?void 0:ai.fallback)?ai.fallback:k?ag:null;if(b=await K.handleResponse({cacheKey:c,req:a,nextConfig:ad,routeKind:e.RouteKind.APP_PAGE,isFallback:!0,prerenderManifest:$,isRoutePPREnabled:ar,responseGenerator:async()=>m({span:i,postponed:void 0,fallbackRouteParams:k||at?(0,n.u)(ag):null}),waitUntil:d.waitUntil}),null===b)return null;if(b)return delete b.cacheControl,b}}let o=ah||g||!au?void 0:au;if(as&&void 0!==o)return{cacheControl:{revalidate:1,expire:void 0},value:{kind:v.CachedRouteKind.PAGES,html:x.default.EMPTY,pageData:{},headers:void 0,status:void 0}};let p=T&&ar&&((0,h.getRequestMeta)(a,"renderFallbackShell")||at)?(0,n.u)(af):null;return m({span:i,postponed:o,fallbackRouteParams:p})},p=async c=>{var f,g,i,j,k;let l,n=await K.handleResponse({cacheKey:aA,responseGenerator:a=>o({span:c,...a}),routeKind:e.RouteKind.APP_PAGE,isOnDemandRevalidate:ah,isRoutePPREnabled:ar,req:a,nextConfig:ad,prerenderManifest:$,waitUntil:d.waitUntil});if(_&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate"),K.isDev&&b.setHeader("Cache-Control","no-store, must-revalidate"),!n){if(aA)throw Object.defineProperty(Error("invariant: cache entry required but not generated"),"__NEXT_ERROR_CODE",{value:"E62",enumerable:!1,configurable:!0});return null}if((null==(f=n.value)?void 0:f.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant app-page handler received invalid cache entry ${null==(i=n.value)?void 0:i.kind}`),"__NEXT_ERROR_CODE",{value:"E707",enumerable:!1,configurable:!0});let p="string"==typeof n.value.postponed;ak&&!av&&(!p||ao)&&(N||b.setHeader("x-nextjs-cache",ah?"REVALIDATED":n.isMiss?"MISS":n.isStale?"STALE":"HIT"),b.setHeader(t.NEXT_IS_PRERENDER_HEADER,"1"));let{value:q}=n;if(au)l={revalidate:0,expire:void 0};else if(N&&ap&&!ao&&ar)l={revalidate:0,expire:void 0};else if(!K.isDev)if(_)l={revalidate:0,expire:void 0};else if(ak){if(n.cacheControl)if("number"==typeof n.cacheControl.revalidate){if(n.cacheControl.revalidate<1)throw Object.defineProperty(Error(`Invalid revalidate configuration provided: ${n.cacheControl.revalidate} < 1`),"__NEXT_ERROR_CODE",{value:"E22",enumerable:!1,configurable:!0});l={revalidate:n.cacheControl.revalidate,expire:(null==(j=n.cacheControl)?void 0:j.expire)??ad.expireTime}}else l={revalidate:y.CACHE_ONE_YEAR,expire:void 0}}else b.getHeader("Cache-Control")||(l={revalidate:0,expire:void 0});if(n.cacheControl=l,"string"==typeof aw&&(null==q?void 0:q.kind)===v.CachedRouteKind.APP_PAGE&&q.segmentData){b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"2");let c=null==(k=q.headers)?void 0:k[y.NEXT_CACHE_TAGS_HEADER];N&&ak&&c&&"string"==typeof c&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,c);let d=q.segmentData.get(aw);return void 0!==d?(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(d,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl}):(b.statusCode=204,(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.EMPTY,cacheControl:n.cacheControl}))}let r=(0,h.getRequestMeta)(a,"onCacheEntry");if(r&&await r({...n,value:{...n.value,kind:"PAGE"}},{url:(0,h.getRequestMeta)(a,"initURL")}))return null;if(p&&au)throw Object.defineProperty(Error("Invariant: postponed state should not be present on a resume request"),"__NEXT_ERROR_CODE",{value:"E396",enumerable:!1,configurable:!0});if(q.headers){let a={...q.headers};for(let[c,d]of(N&&ak||delete a[y.NEXT_CACHE_TAGS_HEADER],Object.entries(a)))if(void 0!==d)if(Array.isArray(d))for(let a of d)b.appendHeader(c,a);else"number"==typeof d&&(d=d.toString()),b.appendHeader(c,d)}let s=null==(g=q.headers)?void 0:g[y.NEXT_CACHE_TAGS_HEADER];if(N&&ak&&s&&"string"==typeof s&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,s),!q.status||ap&&ar||(b.statusCode=q.status),!N&&q.status&&F.RedirectStatusCode[q.status]&&ap&&(b.statusCode=200),p&&b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"1"),ap&&!_){if(void 0===q.rscData){if(q.postponed)throw Object.defineProperty(Error("Invariant: Expected postponed to be undefined"),"__NEXT_ERROR_CODE",{value:"E372",enumerable:!1,configurable:!0});return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:q.html,cacheControl:av?{revalidate:0,expire:void 0}:n.cacheControl})}return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(q.rscData,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl})}let u=q.html;if(!p||N||ap)return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:n.cacheControl});if(as)return u.push(new ReadableStream({start(a){a.enqueue(z.ENCODED_TAGS.CLOSED.BODY_AND_HTML),a.close()}})),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}});let w=new TransformStream;return u.push(w.readable),m({span:c,postponed:q.postponed,fallbackRouteParams:null}).then(async a=>{var b,c;if(!a)throw Object.defineProperty(Error("Invariant: expected a result to be returned"),"__NEXT_ERROR_CODE",{value:"E463",enumerable:!1,configurable:!0});if((null==(b=a.value)?void 0:b.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant: expected a page response, got ${null==(c=a.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E305",enumerable:!1,configurable:!0});await a.value.html.pipeTo(w.writable)}).catch(a=>{w.writable.abort(a).catch(a=>{console.error("couldn't abort transformer",a)})}),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}})};if(!aF)return await aE.withPropagatedContext(a.headers,()=>aE.trace(i.BaseServerSpan.handleRequest,{spanName:`${aD} ${a.url}`,kind:g.SpanKind.SERVER,attributes:{"http.method":aD,"http.target":a.url}},p));await p(aF)}catch(b){throw b instanceof B.NoFallbackError||await K.onRequestError(a,b,{routerKind:"App Router",routePath:G,routeType:"render",revalidateReason:(0,f.c)({isRevalidate:ak,isOnDemandRevalidate:ah})},ac),b}}},33873:a=>{"use strict";a.exports=require("path")},41025:a=>{"use strict";a.exports=require("next/dist/server/app-render/dynamic-access-async-storage.external.js")},56259:(a,b,c)=>{Promise.resolve().then(c.bind(c,64054))},58212:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>f});var d=c(75338),e=c(3003);function f({children:a}){return(0,d.jsx)(e.A,{licenseId:"m1m2",moduleId:"logbook",title:"M1/M2 — Regulations",backHref:"/m1m2",children:a})}},63033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64054:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>t});var d=c(21124),e=c(99837),f=c(38301),g=c.n(f),h=c(95627),i=c.n(h);async function j(a){let b=await fetch("/api/signatories/upsert",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),c=await b.json();if(!b.ok)throw Error(c?.error||"Failed to save signatory");return c}async function k(a){let b=await fetch("/api/signatories/send-verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({signatoryId:a})}),c=await b.json();if(!b.ok)throw Error(c?.error||"Failed to send email");return c}let l=(...a)=>a.filter(Boolean).join(" "),m="/ame-one-logo.png",n=[{ata:"05",title:"Time limits Mtce Checks",tasks:["100 hour check (general aviation aircraft)","Involvement in A,B or C check (transport category aircraft)","Review records for compliance with airworthiness directives","Review records for compliance with component life limits","Inspection following heavy landing","Inspection following lightning strike"]},{ata:"06",title:"Dimensions/Areas",tasks:["Locate components by station number","Perform symmetry check"]},{ata:"07",title:"Lifting/Shoring",tasks:["Jack aircraft nose or tail wheel","Jack complete aircraft","Sling or trestle major component"]}],o=(()=>{let a=[],b=0;return n.forEach(c=>{let d=b,e=b+c.tasks.length-1;a.push({start:d,end:e}),b=e+1}),a})(),p=o.length>0?o[o.length-1].end+1:0,q=Array.from({length:15},(a,b)=>b);function r({logbookId:a}){let[b,c]=(0,f.useState)(""),[e,h]=(0,f.useState)(""),[r,s]=(0,f.useState)("M1/M2"),t=(0,f.useMemo)(()=>new Date().toISOString().slice(0,10),[]),[u,v]=(0,f.useState)(()=>Array.from({length:15},(a,b)=>({id:"",slotNumber:b+1,name:"",email:"",licenceNumber:"",initials:"",signatureSvg:"",dateSigned:"",status:"DRAFT"}))),[w,x]=(0,f.useState)([]),[y,z]=(0,f.useState)(()=>Array(p).fill("pending")),[A,B]=(0,f.useState)(()=>Array(p).fill("")),[C,D]=(0,f.useState)(()=>Array(p).fill("")),[E,F]=(0,f.useState)(()=>Array(p).fill("")),[G,H]=(0,f.useState)(()=>Array(p).fill("")),[I,J]=(0,f.useState)(()=>Array(p).fill(-1)),[K,L]=(0,f.useState)(()=>Array(p).fill(-1)),[M,N]=(0,f.useState)(()=>n.map(()=>!1)),[O,P]=(0,f.useState)(null),Q=(0,f.useRef)(null),R=()=>{P(null),Q.current&&window.clearTimeout(Q.current),Q.current=null},S=(0,f.useMemo)(()=>y.filter(a=>"na"!==a).length,[y]),T=(0,f.useMemo)(()=>y.filter(a=>"signed"===a).length,[y]),U=0===S?0:Math.round(T/S*100),V=a=>{N(b=>b.map((b,c)=>c===a?!b:b))},W=(a,b)=>{z(c=>c.map((c,d)=>d===a?b:c))},X=a=>"signed"===a?"Signed":"na"===a?"Marked N/A":"Pending",Y=(a,b)=>{v(c=>{let d=[...c];return d[a]={...d[a],...b},d})},Z=async b=>{let c=u[b],d={logbookId:a,slotNumber:b+1,name:c.name,email:c.email,licenceNumber:c.licenceNumber,initials:c.initials,dateSigned:c.dateSigned},e=await j(d);return Y(b,e.signatory),e.signatory},$=(0,f.useMemo)(()=>u.map((a,b)=>({idx:b,...a})).filter(a=>(a.name?.trim()??"")!==""||(a.initials?.trim()??"")!=="").map(a=>({value:a.idx,label:`${a.idx+1} — ${a.initials?.trim()?a.initials.trim():a.name?.trim()||"Signatory"}`})),[u]),_=(0,f.useMemo)(()=>{let a=new Map;return w.forEach(b=>{let c=a.get(b.signatoryIndex)??[];c.push(b),a.set(b.signatoryIndex,c)}),a},[w]),aa="px-2 py-[2px] text-[10px] rounded border transition-colors",ab="border-gray-300 bg-white text-gray-700 hover:bg-gray-100",ac="border-gray-500 bg-gray-300 text-gray-900",ad="border-gray-200 bg-gray-100 text-gray-400 cursor-not-allowed",ae="M1/M2"===r?"Airplane & Helicopter":"E"===r?"Avionics":"S"===r?"Structures":"Balloon",af=()=>(0,d.jsx)("div",{className:"print-only border border-black px-3 py-2 mb-2",children:(0,d.jsxs)("div",{className:"flex items-center justify-between text-[11px]",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"font-semibold",children:"Applicant name:"})," ",(0,d.jsx)("span",{children:b||"—"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"font-semibold",children:"File Number:"})," ",(0,d.jsx)("span",{children:e||"—"})]})]})});return(0,d.jsx)("div",{className:"p-4 md:p-8 flex justify-center",children:(0,d.jsxs)("div",{className:"jsx-56ae02fa4972ed11 w-full max-w-5xl bg-white text-[11px] leading-snug border border-black",children:[(0,d.jsx)(i(),{id:"56ae02fa4972ed11",children:"@media print{.screen-only{display:none!important}.print-only{display:block!important}.break-after-page{break-after:page;page-break-after:always}body{-webkit-print-color-adjust:exact;print-color-adjust:exact}}@media screen{.print-only{display:none}}"}),(0,d.jsxs)("div",{className:"jsx-56ae02fa4972ed11 screen-only sticky top-0 z-10 bg-white border-b border-gray-200",children:[(0,d.jsxs)("div",{className:"jsx-56ae02fa4972ed11 flex items-center justify-between px-3 py-2",children:[(0,d.jsx)("button",{type:"button",onClick:()=>window.history.back(),className:"jsx-56ae02fa4972ed11 px-3 py-1 rounded border border-gray-300 bg-white text-gray-800 hover:bg-gray-100",children:"← Return"}),(0,d.jsxs)("div",{className:"jsx-56ae02fa4972ed11 flex items-center gap-2",children:[(0,d.jsxs)("select",{value:r,onChange:a=>s(a.target.value),title:"Licence type (cover)",className:"jsx-56ae02fa4972ed11 px-2 py-1 rounded border border-gray-300 bg-white text-gray-800",children:[(0,d.jsx)("option",{value:"M1/M2",className:"jsx-56ae02fa4972ed11",children:"M1/M2"}),(0,d.jsx)("option",{value:"E",className:"jsx-56ae02fa4972ed11",children:"E"}),(0,d.jsx)("option",{value:"S",className:"jsx-56ae02fa4972ed11",children:"S"}),(0,d.jsx)("option",{value:"B",className:"jsx-56ae02fa4972ed11",children:"B"})]}),(0,d.jsx)("button",{type:"button",onClick:()=>N(n.map(()=>!0)),className:"jsx-56ae02fa4972ed11 px-3 py-1 rounded border border-gray-300 bg-white text-gray-800 hover:bg-gray-100",children:"Expand all"}),(0,d.jsx)("button",{type:"button",onClick:()=>N(n.map(()=>!1)),className:"jsx-56ae02fa4972ed11 px-3 py-1 rounded border border-gray-300 bg-white text-gray-800 hover:bg-gray-100",children:"Collapse all"}),(0,d.jsx)("button",{type:"button",onClick:()=>window.print(),className:"jsx-56ae02fa4972ed11 px-3 py-1 rounded border border-gray-500 bg-gray-800 text-white hover:bg-gray-900",children:"Print logbook"})]})]}),(0,d.jsxs)("div",{className:"jsx-56ae02fa4972ed11 px-3 pb-2",children:[(0,d.jsxs)("div",{className:"jsx-56ae02fa4972ed11 flex items-center justify-between text-[11px] text-gray-700",children:[(0,d.jsxs)("div",{className:"jsx-56ae02fa4972ed11",children:["Progress: ",(0,d.jsx)("strong",{className:"jsx-56ae02fa4972ed11",children:T})," signed out of"," ",(0,d.jsx)("strong",{className:"jsx-56ae02fa4972ed11",children:S})," applicable"]}),(0,d.jsx)("div",{className:"jsx-56ae02fa4972ed11",children:(0,d.jsxs)("strong",{className:"jsx-56ae02fa4972ed11",children:[U,"%"]})})]}),(0,d.jsx)("div",{className:"jsx-56ae02fa4972ed11 mt-1 h-2 w-full rounded bg-gray-200 overflow-hidden",children:(0,d.jsx)("div",{style:{width:`${U}%`},className:"jsx-56ae02fa4972ed11 h-full bg-gray-700"})})]})]}),(0,d.jsx)("div",{className:"jsx-56ae02fa4972ed11 print-only break-after-page",children:(0,d.jsxs)("div",{className:"jsx-56ae02fa4972ed11 border border-black min-h-[1050px] p-10 relative overflow-hidden",children:[(0,d.jsx)("div",{style:{transform:"rotate(-25deg)"},className:"jsx-56ae02fa4972ed11 absolute inset-0 flex items-center justify-center pointer-events-none",children:(0,d.jsx)("div",{className:"jsx-56ae02fa4972ed11 text-[120px] font-black tracking-widest opacity-10",children:"AME ONE"})}),(0,d.jsxs)("div",{className:"jsx-56ae02fa4972ed11 relative",children:[(0,d.jsx)("div",{className:"jsx-56ae02fa4972ed11 flex items-center justify-center mb-8",children:(0,d.jsx)("img",{src:m,alt:"",className:"jsx-56ae02fa4972ed11 w-40 opacity-95"})}),(0,d.jsx)("div",{className:"jsx-56ae02fa4972ed11 text-[14px] font-semibold text-center",children:"Transport Canada – Maintenance Task Log"}),(0,d.jsx)("div",{className:"jsx-56ae02fa4972ed11 text-[42px] font-black mt-3 text-center",children:"LOGBOOK"}),(0,d.jsxs)("div",{className:"jsx-56ae02fa4972ed11 mt-3 text-[16px] text-center",children:["Licence: ",(0,d.jsx)("span",{className:"jsx-56ae02fa4972ed11 font-semibold",children:r})," ",(0,d.jsxs)("span",{className:"jsx-56ae02fa4972ed11 text-gray-700",children:["— ",ae]})]}),(0,d.jsxs)("div",{className:"jsx-56ae02fa4972ed11 mt-10 text-center text-[12px] text-gray-700",children:["Generated on ",t]}),(0,d.jsx)("div",{className:"jsx-56ae02fa4972ed11 absolute left-10 right-10 bottom-10 text-[11px] text-gray-700 text-center",children:"AME ONE — Logbook Module (Print edition)"})]})]})}),(0,d.jsx)(af,{className:"jsx-56ae02fa4972ed11"}),(0,d.jsx)("table",{className:"jsx-56ae02fa4972ed11 w-full border-b border-black border-collapse",children:(0,d.jsx)("tbody",{className:"jsx-56ae02fa4972ed11",children:(0,d.jsxs)("tr",{className:"jsx-56ae02fa4972ed11",children:[(0,d.jsxs)("td",{className:"jsx-56ae02fa4972ed11 border-r border-black px-2 py-1 font-semibold w-3/4",children:["Applicant name",(0,d.jsx)("div",{className:"jsx-56ae02fa4972ed11 mt-1",children:(0,d.jsx)("input",{type:"text",value:b,onChange:a=>c(a.target.value),className:"jsx-56ae02fa4972ed11 w-full h-6 border border-gray-300 bg-blue-100"})})]}),(0,d.jsxs)("td",{className:"jsx-56ae02fa4972ed11 px-2 py-1 font-semibold",children:["File Number",(0,d.jsx)("div",{className:"jsx-56ae02fa4972ed11 mt-1",children:(0,d.jsx)("input",{type:"text",value:e,onChange:a=>h(a.target.value),className:"jsx-56ae02fa4972ed11 w-full h-6 border border-gray-300 bg-blue-100"})})]})]})})}),(0,d.jsxs)("div",{className:"jsx-56ae02fa4972ed11 px-2 py-2 border-b border-black",children:[(0,d.jsx)("div",{className:"jsx-56ae02fa4972ed11 font-semibold mb-1",children:"Instructions"}),(0,d.jsx)("p",{className:"jsx-56ae02fa4972ed11",children:"The Maintenance Task List below is based on paragraph 566.03(4)(e) and Appendix B of Chapter 566 of the Airworthiness. Applicants utilizing this document, including persons authorized to certify the completion of tasks, should be familiar with these requirements to properly complete this document as a means for an applicant to establish proof of skill."}),(0,d.jsx)("p",{className:"jsx-56ae02fa4972ed11 mt-1",children:"Applicants cannot sign for their own maintenance tasks regardless of whether they hold a rating, foreign licence, or authority within an organization to sign a maintenance release or equivalent release."}),(0,d.jsx)("p",{className:"jsx-56ae02fa4972ed11 mt-1",children:"Only tasks completed which have been subject to a maintenance release or equivalent are acceptable. Tasks completed are to be initialled by the holder of an AME licence or equivalent person attesting to its completion by the applicant, and that the person has observed the work to the extent necessary and confirm that the applicant has completed the tasks in accordance with the standards of airworthiness."}),(0,d.jsx)("p",{className:"jsx-56ae02fa4972ed11 mt-1",children:"The applicant is responsible to ensure that the tasks performed are applicable to the rating sought and to the aircraft, systems or components for which the experience is being claimed."}),(0,d.jsx)("p",{className:"jsx-56ae02fa4972ed11 mt-1",children:"Where a maintenance task has been initialled by a foreign AME licence holder or by an equivalent person holding an authority such as a Shop Certification Authority (SCA), the applicant is to provide certified true copies of the person’s foreign licence or authority along with this document for review."}),(0,d.jsx)("p",{className:"jsx-56ae02fa4972ed11 mt-1",children:"Each signatory is required to complete the information below (limit of 15 signatories):"})]}),(0,d.jsx)("div",{className:"jsx-56ae02fa4972ed11 px-2 pt-2 border-b border-black",children:(0,d.jsx)("div",{className:"jsx-56ae02fa4972ed11 font-semibold mb-1",children:"Signatory Information"})}),(0,d.jsxs)("table",{className:"jsx-56ae02fa4972ed11 w-full border-b border-black border-collapse",children:[(0,d.jsx)("thead",{className:"jsx-56ae02fa4972ed11",children:(0,d.jsxs)("tr",{className:"jsx-56ae02fa4972ed11",children:[(0,d.jsx)("th",{className:"jsx-56ae02fa4972ed11 border-t border-b border-black px-1 py-1 w-[5%]",children:"#"}),(0,d.jsx)("th",{className:"jsx-56ae02fa4972ed11 border-t border-b border-l border-black px-1 py-1 text-left",children:"Name (print)"}),(0,d.jsx)("th",{className:"jsx-56ae02fa4972ed11 border-t border-b border-l border-black px-1 py-1 text-left w-[22%]",children:"Licence or Authority Number"}),(0,d.jsx)("th",{className:"jsx-56ae02fa4972ed11 border-t border-b border-l border-black px-1 py-1 text-left w-[10%]",children:"Initials"}),(0,d.jsx)("th",{className:"jsx-56ae02fa4972ed11 border-t border-b border-l border-black px-1 py-1 text-left w-[23%]",children:"Signature"}),(0,d.jsx)("th",{className:"jsx-56ae02fa4972ed11 border-t border-b border-l border-black px-1 py-1 text-left w-[15%]",children:"Date (yyyy-mm-dd)"})]})}),(0,d.jsx)("tbody",{className:"jsx-56ae02fa4972ed11",children:q.map(a=>{let b=_.get(a)??[],c=u[a];return(0,d.jsxs)("tr",{className:"jsx-56ae02fa4972ed11",children:[(0,d.jsx)("td",{className:"jsx-56ae02fa4972ed11 border-t border-black px-1 py-1 text-center",children:a+1}),(0,d.jsxs)("td",{className:"jsx-56ae02fa4972ed11 border-t border-l border-black px-1 py-1",children:[(0,d.jsx)("input",{type:"text",value:c.name,onChange:b=>Y(a,{name:b.target.value}),onBlur:async()=>{try{await Z(a)}catch{}},className:"jsx-56ae02fa4972ed11 w-full h-6 border border-gray-300 bg-blue-100"}),(0,d.jsxs)("div",{className:"jsx-56ae02fa4972ed11 screen-only mt-1 flex items-center gap-2",children:[(0,d.jsx)("input",{type:"email",value:c.email,onChange:b=>Y(a,{email:b.target.value}),onBlur:async()=>{try{await Z(a)}catch{}},placeholder:"Email (for verification)",className:"jsx-56ae02fa4972ed11 flex-1 h-6 border border-gray-300 rounded px-2 text-[10px]"}),(0,d.jsx)("button",{type:"button",onClick:async()=>{try{let b=await Z(a);if(!b?.email?.trim())return void alert("Email missing");await k(b.id),Y(a,{status:"PENDING"})}catch(a){alert(a?.message||"Failed to send email")}},title:"Send verification link to signatory",className:"jsx-56ae02fa4972ed11 "+(l("px-2 py-[2px] rounded border text-[10px]","VERIFIED"===c.status?"border-green-600 bg-green-50 text-green-700":"PENDING"===c.status?"border-amber-600 bg-amber-50 text-amber-700":"border-gray-300 bg-white hover:bg-gray-100")||""),children:"VERIFIED"===c.status?"Verified":"PENDING"===c.status?"Pending":"Verify (email)"}),(0,d.jsx)("span",{title:"Signatory status",className:"jsx-56ae02fa4972ed11 "+(l("text-[10px] px-2 py-[1px] rounded border","VERIFIED"===c.status?"border-green-300 text-green-700 bg-green-50":"PENDING"===c.status?"border-amber-300 text-amber-700 bg-amber-50":"border-gray-300 text-gray-600 bg-gray-50")||""),children:c.status})]}),(0,d.jsxs)("div",{className:"jsx-56ae02fa4972ed11 screen-only mt-2",children:[(0,d.jsxs)("label",{title:"Upload supporting documentation (images)",className:"jsx-56ae02fa4972ed11 inline-flex items-center gap-2 px-3 py-1 rounded border border-gray-300 bg-white text-gray-800 hover:bg-gray-100 text-[11px] cursor-pointer",children:[(0,d.jsx)("span",{className:"jsx-56ae02fa4972ed11 font-semibold",children:"Upload"}),(0,d.jsx)("span",{className:"jsx-56ae02fa4972ed11 text-gray-600",children:"(supporting docs)"}),(0,d.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:b=>{((a,b)=>{if(!b||0===b.length)return;let c=Array.from(b).filter(a=>/^image\/(png|jpe?g|webp)$/i.test(a.type)).map(b=>({signatoryIndex:a,file:b,url:URL.createObjectURL(b)}));x(a=>[...a,...c])})(a,b.target.files),b.currentTarget.value=""},className:"jsx-56ae02fa4972ed11 hidden"})]}),b.length>0&&(0,d.jsx)("div",{className:"jsx-56ae02fa4972ed11 mt-2 space-y-1",children:b.map((a,b)=>{let c=w.findIndex(b=>b===a);return(0,d.jsxs)("div",{className:"jsx-56ae02fa4972ed11 flex items-center justify-between gap-2 p-1 border border-gray-200 rounded",children:[(0,d.jsx)("span",{className:"jsx-56ae02fa4972ed11 text-[10px] text-gray-700 truncate",children:a.file.name}),(0,d.jsx)("button",{type:"button",onClick:()=>{x(a=>{let b=a[c];return b?.url&&URL.revokeObjectURL(b.url),a.filter((a,b)=>b!==c)})},className:"jsx-56ae02fa4972ed11 px-2 py-[1px] rounded border border-gray-300 text-[10px] hover:bg-gray-100",children:"Remove"})]},`${a.file.name}-${b}`)})})]})]}),(0,d.jsx)("td",{className:"jsx-56ae02fa4972ed11 border-t border-l border-black px-1 py-1",children:(0,d.jsx)("input",{type:"text",value:c.licenceNumber,onChange:b=>Y(a,{licenceNumber:b.target.value}),onBlur:async()=>{try{await Z(a)}catch{}},className:"jsx-56ae02fa4972ed11 w-full h-6 border border-gray-300 bg-blue-100"})}),(0,d.jsx)("td",{className:"jsx-56ae02fa4972ed11 border-t border-l border-black px-1 py-1",children:(0,d.jsx)("input",{type:"text",value:c.initials,onChange:b=>Y(a,{initials:b.target.value}),onBlur:async()=>{try{await Z(a)}catch{}},className:"jsx-56ae02fa4972ed11 w-full h-6 border border-gray-300 bg-blue-100"})}),(0,d.jsxs)("td",{className:"jsx-56ae02fa4972ed11 border-t border-l border-black px-1 py-1",children:[(0,d.jsx)("div",{className:"jsx-56ae02fa4972ed11 w-full min-h-[24px] border border-gray-300 bg-blue-50 flex items-center",children:c.signatureSvg?(0,d.jsx)("div",{style:{padding:"2px"},dangerouslySetInnerHTML:{__html:c.signatureSvg},className:"jsx-56ae02fa4972ed11 w-full h-[24px] overflow-hidden"}):(0,d.jsx)("div",{className:"jsx-56ae02fa4972ed11 w-full h-[24px]"})}),(0,d.jsx)("div",{className:"jsx-56ae02fa4972ed11 screen-only mt-1 text-[10px] text-gray-500",children:"Signature appears after verification."})]}),(0,d.jsx)("td",{className:"jsx-56ae02fa4972ed11 border-t border-l border-black px-1 py-1",children:(0,d.jsx)("input",{type:"date",value:c.dateSigned,onChange:b=>Y(a,{dateSigned:b.target.value}),onBlur:async()=>{try{await Z(a)}catch{}},className:"jsx-56ae02fa4972ed11 w-full h-6 border border-gray-300 bg-blue-100 text-[10px]"})})]},a)})})]}),(0,d.jsx)("div",{className:"jsx-56ae02fa4972ed11 print-only px-2 pt-3",children:q.map(a=>{let b=_.get(a)??[];return 0===b.length?null:(0,d.jsxs)("div",{className:"jsx-56ae02fa4972ed11 break-after-page",children:[(0,d.jsx)(af,{}),(0,d.jsxs)("div",{className:"jsx-56ae02fa4972ed11 font-semibold mb-2",children:["Supporting documentation — Signatory #",a+1]}),b.map((a,b)=>(0,d.jsxs)("div",{className:"jsx-56ae02fa4972ed11 break-after-page",children:[(0,d.jsx)("div",{className:"jsx-56ae02fa4972ed11 text-[10px] mb-1",children:a.file.name}),(0,d.jsx)("img",{src:a.url,alt:a.file.name,className:"jsx-56ae02fa4972ed11 w-full border border-black"})]},`${a.file.name}-${b}`))]},`support-${a}`)})}),(0,d.jsxs)("div",{className:"jsx-56ae02fa4972ed11 px-2 py-2 border-b border-black",children:[(0,d.jsx)("div",{className:"jsx-56ae02fa4972ed11 font-semibold mb-1",children:"Instructions to complete the maintenance task list:"}),(0,d.jsxs)("ul",{className:"jsx-56ae02fa4972ed11 list-disc pl-5",children:[(0,d.jsxs)("li",{className:"jsx-56ae02fa4972ed11",children:[(0,d.jsx)("strong",{className:"jsx-56ae02fa4972ed11",children:"Date completed"})," – year, month, day, e.g., YYYY-MM-DD."]}),(0,d.jsxs)("li",{className:"jsx-56ae02fa4972ed11",children:[(0,d.jsx)("strong",{className:"jsx-56ae02fa4972ed11",children:"Aircraft type"})," – model based on aircraft Type Certificate Data Sheet (TCDS)."]}),(0,d.jsxs)("li",{className:"jsx-56ae02fa4972ed11",children:[(0,d.jsx)("strong",{className:"jsx-56ae02fa4972ed11",children:"Component"})," – e.g., starter generator."]}),(0,d.jsxs)("li",{className:"jsx-56ae02fa4972ed11",children:[(0,d.jsx)("strong",{className:"jsx-56ae02fa4972ed11",children:"Aircraft registration"})," – aircraft marks e.g., C-GCFJ."]}),(0,d.jsxs)("li",{className:"jsx-56ae02fa4972ed11",children:[(0,d.jsx)("strong",{className:"jsx-56ae02fa4972ed11",children:"Component serial number"})," – serial number from the component data plate."]}),(0,d.jsxs)("li",{className:"jsx-56ae02fa4972ed11",children:[(0,d.jsx)("strong",{className:"jsx-56ae02fa4972ed11",children:"Initials of AME or equivalent person"})," – initials of a person listed in signatory table."]})]})]}),(0,d.jsx)("div",{className:"jsx-56ae02fa4972ed11 px-2 pt-2",children:(0,d.jsx)("div",{className:"jsx-56ae02fa4972ed11 font-semibold mb-1",children:"MAINTENANCE TASK LIST"})}),(0,d.jsxs)("table",{className:"jsx-56ae02fa4972ed11 w-full border-t border-black border-collapse",children:[(0,d.jsx)("thead",{className:"jsx-56ae02fa4972ed11",children:(0,d.jsxs)("tr",{className:"jsx-56ae02fa4972ed11",children:[(0,d.jsx)("th",{className:"jsx-56ae02fa4972ed11 border-b border-black px-2 py-1 w-[10%]",children:"ATA"}),(0,d.jsx)("th",{className:"jsx-56ae02fa4972ed11 border-b border-l border-black px-2 py-1 text-left",children:"Maintenance Tasks"}),(0,d.jsx)("th",{className:"jsx-56ae02fa4972ed11 border-b border-l border-black px-2 py-1 w-[14%]",children:"Date Completed"}),(0,d.jsx)("th",{className:"jsx-56ae02fa4972ed11 border-b border-l border-black px-2 py-1 w-[18%]",children:"Aircraft Type or Component"}),(0,d.jsx)("th",{className:"jsx-56ae02fa4972ed11 border-b border-l border-black px-2 py-1 w-[22%]",children:"Aircraft Registration or Component Serial Number"}),(0,d.jsx)("th",{className:"jsx-56ae02fa4972ed11 border-b border-l border-black px-2 py-1 w-[16%]",children:"Initials of AME or equivalent person"})]})}),(0,d.jsx)("tbody",{className:"jsx-56ae02fa4972ed11",children:n.map((a,b)=>{let c=M[b],e=o[b]?.start??0;return(0,d.jsxs)(g().Fragment,{children:[(0,d.jsxs)("tr",{className:"jsx-56ae02fa4972ed11",children:[(0,d.jsx)("td",{onClick:()=>V(b),className:"jsx-56ae02fa4972ed11 "+(l("border-t border-black px-2 font-semibold align-middle cursor-pointer select-none",c?"py-2":"py-1")||""),children:(0,d.jsxs)("div",{className:"jsx-56ae02fa4972ed11 "+(l("relative pr-10",c?"leading-snug":"leading-tight")||""),children:[(0,d.jsxs)("div",{className:"jsx-56ae02fa4972ed11",children:["ATA ",a.ata]}),(0,d.jsx)("div",{className:"jsx-56ae02fa4972ed11 "+(l("font-normal",c?"text-[11px]":"text-[10px]")||""),children:a.title}),(0,d.jsx)("button",{type:"button",onClick:a=>{a.stopPropagation(),V(b)},"aria-label":c?"Collapse ATA":"Expand ATA",className:"jsx-56ae02fa4972ed11 screen-only absolute right-0 top-1/2 -translate-y-1/2 w-9 h-8 rounded border border-gray-300 text-lg leading-none hover:bg-gray-100",children:c?"−":"+"})]})}),(0,d.jsx)("td",{className:"jsx-56ae02fa4972ed11 "+(l("border-t border-l border-black px-2",c?"py-2":"py-1")||""),children:c&&(0,d.jsxs)("div",{className:"jsx-56ae02fa4972ed11 screen-only flex justify-end gap-2",children:[(0,d.jsx)("button",{type:"button",onClick:()=>(a=>{let{start:b,end:c}=o[a];z(a=>a.map((a,d)=>d>=b&&d<=c&&"na"===a?"pending":a))})(b),className:"jsx-56ae02fa4972ed11 "+(l(aa,ab)||""),children:"Reset N/A"}),(0,d.jsx)("button",{type:"button",onClick:()=>(a=>{let{start:b,end:c}=o[a];z(a=>a.map((a,d)=>d>=b&&d<=c?"na":a))})(b),className:"jsx-56ae02fa4972ed11 "+(l(aa,ab)||""),children:"N/A Chapter"})]})}),(0,d.jsx)("td",{className:"jsx-56ae02fa4972ed11 "+(l("border-t border-l border-black px-2",c?"py-2":"py-1")||"")}),(0,d.jsx)("td",{className:"jsx-56ae02fa4972ed11 "+(l("border-t border-l border-black px-2",c?"py-2":"py-1")||"")}),(0,d.jsx)("td",{className:"jsx-56ae02fa4972ed11 "+(l("border-t border-l border-black px-2",c?"py-2":"py-1")||"")}),(0,d.jsx)("td",{className:"jsx-56ae02fa4972ed11 "+(l("border-t border-l border-black px-2",c?"py-2":"py-1")||"")})]}),c&&a.tasks.map((b,c)=>{let f=e+c,g=y[f],h="signed"===g||"na"===g,i="signed"===g,j="na"===g,k=K[f],m=k>=0?u[k]?.signatureSvg??"":"";return(0,d.jsxs)("tr",{className:"jsx-56ae02fa4972ed11",children:[(0,d.jsx)("td",{className:"jsx-56ae02fa4972ed11 border-t border-black px-2 py-1"}),(0,d.jsx)("td",{className:"jsx-56ae02fa4972ed11 border-t border-l border-black px-2 py-1",children:(0,d.jsxs)("div",{className:"jsx-56ae02fa4972ed11 flex items-start justify-between gap-2",children:[(0,d.jsxs)("span",{className:"jsx-56ae02fa4972ed11",children:["• ",b]}),(0,d.jsx)("span",{className:"jsx-56ae02fa4972ed11 screen-only text-[10px] text-gray-500",children:X(g)})]})}),(0,d.jsx)("td",{className:"jsx-56ae02fa4972ed11 border-t border-l border-black px-1 py-1",children:(0,d.jsx)("input",{type:"date",value:A[f],onChange:a=>B(b=>{let c=[...b];return c[f]=a.target.value,c}),disabled:h,className:"jsx-56ae02fa4972ed11 "+(l("w-full h-6 border border-gray-300 bg-blue-100 text-[10px]",h&&"bg-gray-200 text-gray-700")||"")})}),(0,d.jsx)("td",{className:"jsx-56ae02fa4972ed11 border-t border-l border-black px-1 py-1",children:(0,d.jsx)("input",{type:"text",value:C[f],onChange:a=>D(b=>{let c=[...b];return c[f]=a.target.value,c}),readOnly:h,className:"jsx-56ae02fa4972ed11 "+(l("w-full h-6 border border-gray-300 bg-blue-100",h&&"bg-gray-200 text-gray-700")||"")})}),(0,d.jsx)("td",{className:"jsx-56ae02fa4972ed11 border-t border-l border-black px-1 py-1",children:(0,d.jsx)("input",{type:"text",value:E[f],onChange:a=>F(b=>{let c=[...b];return c[f]=a.target.value,c}),readOnly:h,className:"jsx-56ae02fa4972ed11 "+(l("w-full h-6 border border-gray-300 bg-blue-100",h&&"bg-gray-200 text-gray-700")||"")})}),(0,d.jsxs)("td",{className:"jsx-56ae02fa4972ed11 border-t border-l border-black px-1 py-1",children:[(0,d.jsx)("input",{type:"text",value:G[f],onChange:a=>H(b=>{let c=[...b];return c[f]=a.target.value,c}),readOnly:h,className:"jsx-56ae02fa4972ed11 "+(l("w-full h-6 border border-gray-300 bg-blue-100",h&&"bg-gray-200 text-gray-700")||"")}),i&&m&&(0,d.jsx)("div",{style:{padding:"2px"},className:"jsx-56ae02fa4972ed11 mt-1 border border-gray-300 bg-white h-10 overflow-hidden",children:(0,d.jsx)("div",{dangerouslySetInnerHTML:{__html:m},className:"jsx-56ae02fa4972ed11 w-full h-full"})}),(0,d.jsxs)("div",{className:"jsx-56ae02fa4972ed11 screen-only mt-1 flex flex-col gap-1",children:[(0,d.jsxs)("div",{className:"jsx-56ae02fa4972ed11 flex gap-1",children:[(0,d.jsxs)("select",{disabled:h,value:I[f]??-1,onChange:a=>((a,b)=>{J(c=>{let d=[...c];return d[a]=b,d});let c=b>=0?(u[b]?.initials??"").trim():"";c&&!G[a]&&H(b=>{let d=[...b];return d[a]=c,d})})(f,Number(a.target.value)),className:"jsx-56ae02fa4972ed11 "+(l("flex-1 h-6 border border-gray-300 rounded text-[10px]",h&&"bg-gray-100 text-gray-500")||""),children:[(0,d.jsx)("option",{value:-1,className:"jsx-56ae02fa4972ed11",children:"Choose signatory…"}),$.map(a=>(0,d.jsx)("option",{value:a.value,className:"jsx-56ae02fa4972ed11",children:a.label},a.value))]}),(0,d.jsx)("button",{type:"button",disabled:h&&!i,onClick:()=>{if(h)return;let a=I[f];if(a<0||"VERIFIED"!==(u[a]?.status||"DRAFT"))return void(P(f),Q.current&&window.clearTimeout(Q.current),Q.current=window.setTimeout(()=>{P(null),Q.current=null},2e3));let b=(u[a]?.initials??"").trim();b&&!G[f]&&H(a=>{let c=[...a];return c[f]=b,c}),R(),L(b=>{let c=[...b];return c[f]=a,c}),W(f,"signed")},"aria-pressed":i,className:"jsx-56ae02fa4972ed11 "+(l(aa,i?ac:ab,h&&!i&&ad)||""),children:"Sign"}),(0,d.jsx)("button",{type:"button",disabled:h&&!j,onClick:()=>{R(),L(a=>{let b=[...a];return b[f]=-1,b}),W(f,"na")},"aria-pressed":j,className:"jsx-56ae02fa4972ed11 "+(l(aa,j?ac:ab,h&&!j&&ad)||""),children:"Mark N/A"}),(0,d.jsx)("button",{type:"button",onClick:()=>{R(),L(a=>{let b=[...a];return b[f]=-1,b}),W(f,"pending")},className:"jsx-56ae02fa4972ed11 "+(l(aa,ab)||""),children:"Undo"})]}),O===f&&(0,d.jsx)("div",{className:"jsx-56ae02fa4972ed11 text-[10px] text-red-600",children:(()=>{let a=I[f];return a<0?"Choose signatory first.":"VERIFIED"!==(u[a]?.status||"DRAFT")?"Signatory must be VERIFIED first.":"Choose signatory first."})()}),(0,d.jsxs)("div",{className:"jsx-56ae02fa4972ed11 text-[10px] text-gray-500",children:["Status: ",X(g)]})]})]})]},`${a.ata}-${c}`)})]},`${a.ata}-${b}`)})})]}),(0,d.jsx)("div",{className:"jsx-56ae02fa4972ed11 print-only",children:(0,d.jsxs)("div",{className:"jsx-56ae02fa4972ed11 border border-black min-h-[1050px] p-10 relative flex flex-col",children:[(0,d.jsx)("div",{className:"jsx-56ae02fa4972ed11 flex-1 flex items-center justify-center",children:(0,d.jsx)("img",{src:m,alt:"",className:"jsx-56ae02fa4972ed11 w-80 opacity-90"})}),(0,d.jsxs)("div",{className:"jsx-56ae02fa4972ed11 text-center text-[11px] text-gray-600 mt-6",children:["AME ONE — Aircraft Maintenance Engineer Platform",(0,d.jsx)("br",{className:"jsx-56ae02fa4972ed11"}),"Logbook module \xb7 Generated on ",t]})]})})]})})}function s(){let[a,b]=(0,f.useState)(""),[c,e]=(0,f.useState)("");return c?(0,d.jsxs)("div",{className:"p-6",children:[(0,d.jsx)("div",{className:"text-red-600 font-semibold",children:"Bootstrap error"}),(0,d.jsx)("div",{className:"text-sm mt-2",children:c})]}):a?(0,d.jsx)(r,{logbookId:a}):(0,d.jsx)("div",{className:"p-6 text-gray-700",children:"Loading logbook…"})}function t(){return(0,d.jsx)(e.A,{moduleKey:"m1m2.logbook",title:"M1/M2 Logbook",children:(0,d.jsx)(s,{})})}},65169:(a,b,c)=>{let{createProxy:d}=c(39893);a.exports=d("C:\\Users\\charl\\OneDrive\\Desktop\\AME ONE\\AME ONE\\node_modules\\next\\dist\\client\\app-dir\\link.js")},71300:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>f});var d=c(75338),e=c(3003);function f({children:a}){return(0,d.jsx)(e.A,{licenseId:"m1m2",title:"M1/M2",backHref:"/",children:a})}},75535:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(23339).A)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},77227:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\charl\\\\OneDrive\\\\Desktop\\\\AME ONE\\\\AME ONE\\\\src\\\\app\\\\m1m2\\\\logbook\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\charl\\OneDrive\\Desktop\\AME ONE\\AME ONE\\src\\app\\m1m2\\logbook\\page.tsx","default")},80235:(a,b,c)=>{Promise.resolve().then(c.bind(c,77227))},86439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")}};var b=require("../../../webpack-runtime.js");b.C(a);var c=b.X(0,[4586,6659,3991,9471,8344,2762],()=>b(b.s=29314));module.exports=c})();